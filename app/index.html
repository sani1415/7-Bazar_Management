<!DOCTYPE html>
<html lang="bn">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5, user-scalable=yes">
    <title>‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü - Improved Mockup</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üõí</text></svg>">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+Bengali:wght@400;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
    <!-- Supabase Client Library (must load before app.js) -->
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <!-- Hijri to Gregorian (for CSV import with Hijri dates) -->
    <script src="lib/hijri-converter-browser.js"></script>
</head>
<body>
    <div class="container">
        <div class="header header-with-toggle">
            <div class="header-title-wrap">
                <h1>üõí ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶Æ‡ßç‡¶Ø‡¶æ‡¶®‡ßá‡¶ú‡¶Æ‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡¶ø‡¶∏‡ßç‡¶ü‡ßá‡¶Æ</h1>
                <p class="header-subtitle">Improved Mockup - Excel Style Entry</p>
            </div>
            <div class="view-toggle" role="switch" aria-label="‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ ‡¶¨‡¶æ ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶≠‡¶ø‡¶â">
                <button type="button" class="view-toggle-btn active" id="toggle-worker" onclick="switchView('worker')">‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ</button>
                <button type="button" class="view-toggle-btn" id="toggle-admin" onclick="switchView('admin')">‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶®</button>
            </div>
        </div>

        <!-- ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ‡¶∞ ‡¶≠‡¶ø‡¶â -->
        <div id="worker-view" class="view active">
            <!-- Worker dashboard (‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ‡¶∞ ‡¶°‡ßç‡¶Ø‡¶æ‡¶∂‡¶¨‡ßã‡¶∞‡ßç‡¶°) -->
            <div class="worker-dashboard">
                <div class="balance-card worker-balance-card">
                    <div class="balance-card-header">
                        <span class="balance-card-title" id="worker-balance-label">‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ‡¶∞ ‡¶π‡¶æ‡¶§‡ßá ‡¶ü‡¶æ‡¶ï‡¶æ</span>
                        <span class="balance-card-update">‡¶∂‡ßá‡¶∑ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü</span>
                    </div>
                    <div class="balance-amount" id="worker-balance-amount">‡ß≥ ‡ß¶</div>
                    <div class="action-buttons">
                        <button class="btn btn-primary balance-btn" type="button" onclick="openAddMoney()">+ ‡¶ü‡¶æ‡¶ï‡¶æ ‡¶¶‡¶ø‡¶®</button>
                        <button class="btn btn-secondary balance-btn" type="button" onclick="openBalanceStatement()">‡¶π‡¶ø‡¶∏‡¶æ‡¶¨ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</button>
                    </div>
                </div>
                <div class="worker-stats-grid stats-grid">
                    <div class="stat-card">
                        <div class="stat-value" id="worker-stat-count">‡ß¶</div>
                        <div class="stat-label">‡¶è‡¶á ‡¶Æ‡¶æ‡¶∏‡ßá ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="worker-stat-total">‡ß≥ ‡ß¶</div>
                        <div class="stat-label">‡¶è‡¶á ‡¶Æ‡¶æ‡¶∏‡ßá ‡¶Æ‡ßã‡¶ü ‡¶ñ‡¶∞‡¶ö</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-value" id="worker-stat-balance">‡ß≥ ‡ß¶</div>
                        <div class="stat-label" id="worker-stat-balance-label">‡¶π‡¶æ‡¶§‡ßá ‡¶ü‡¶æ‡¶ï‡¶æ</div>
                    </div>
                </div>
                <div class="card worker-recent-card">
                    <div class="card-title">‡¶∏‡¶æ‡¶Æ‡ßç‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ï ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø</div>
                    <div class="worker-recent-table-wrap">
                        <table class="table table-entries">
                            <thead>
                                <tr>
                                    <th>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</th>
                                    <th>‡¶Æ‡ßã‡¶ü ‡¶ñ‡¶∞‡¶ö</th>
                                </tr>
                            </thead>
                            <tbody id="worker-recent-tbody">
                                <tr><td colspan="2" style="text-align:center;color:#6b7280;padding:10px;">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Worker tabs: ‡¶®‡¶§‡ßÅ‡¶® ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø | ‡¶∏‡¶¨ ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø | ‡¶≤‡¶ó | ‡¶¨‡¶ø‡¶≤ ‡¶á‡¶Æ‡¶™‡ßã‡¶∞‡ßç‡¶ü -->
            <div class="worker-tabs">
                <button type="button" class="worker-tab-btn active" data-worker-tab="new" onclick="switchWorkerTab('new')">‡¶®‡¶§‡ßÅ‡¶® ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø</button>
                <button type="button" class="worker-tab-btn" data-worker-tab="list" onclick="switchWorkerTab('list')">‡¶∏‡¶¨ ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø</button>
                <button type="button" class="worker-tab-btn" data-worker-tab="log" onclick="switchWorkerTab('log')">‡¶≤‡¶ó</button>
                <button type="button" class="worker-tab-btn" data-worker-tab="import" onclick="switchWorkerTab('import')">‡¶¨‡¶ø‡¶≤ ‡¶á‡¶Æ‡¶™‡ßã‡¶∞‡ßç‡¶ü</button>
            </div>

            <div id="worker-panel-new" class="worker-tab-panel active">
            <div class="card">
                <div class="new-entry-header">
                    <span class="new-entry-title">‡¶®‡¶§‡ßÅ‡¶®</span>
                    <input type="date" id="entry-date" class="entry-date-inline" value="" title="‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ">
                </div>

                <div class="form-group">
                    <label>‡¶¶‡ßç‡¶∞‡ßÅ‡¶§ ‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶® (Common Items)</label>
                    <div class="quick-items">
                        <div class="quick-item" onclick="addQuickItem('üçö ‡¶ö‡¶æ‡¶≤')">üçö ‡¶ö‡¶æ‡¶≤</div>
                        <div class="quick-item" onclick="addQuickItem('ü´ò ‡¶°‡¶æ‡¶≤')">ü´ò ‡¶°‡¶æ‡¶≤</div>
                        <div class="quick-item" onclick="addQuickItem('üõ¢Ô∏è ‡¶§‡ßá‡¶≤')">üõ¢Ô∏è ‡¶§‡ßá‡¶≤</div>
                        <div class="quick-item" onclick="addQuickItem('üßÖ ‡¶™‡ßá‡¶Å‡¶Ø‡¶º‡¶æ‡¶ú')">üßÖ ‡¶™‡ßá‡¶Å‡¶Ø‡¶º‡¶æ‡¶ú</div>
                        <div class="quick-item" onclick="addQuickItem('üßÑ ‡¶∞‡¶∏‡ßÅ‡¶®')">üßÑ ‡¶∞‡¶∏‡ßÅ‡¶®</div>
                        <div class="quick-item" onclick="addQuickItem('ü•î ‡¶Ü‡¶≤‡ßÅ')">ü•î ‡¶Ü‡¶≤‡ßÅ</div>
                        <div class="quick-item" onclick="addQuickItem('üå∂Ô∏è ‡¶Æ‡¶∞‡¶ø‡¶ö')">üå∂Ô∏è ‡¶Æ‡¶∞‡¶ø‡¶ö</div>
                        <div class="quick-item" onclick="addQuickItem('üêü ‡¶Æ‡¶æ‡¶õ')">üêü ‡¶Æ‡¶æ‡¶õ</div>
                        <div class="quick-item" onclick="addQuickItem('üçó ‡¶Æ‡ßÅ‡¶∞‡¶ó‡¶ø')">üçó ‡¶Æ‡ßÅ‡¶∞‡¶ó‡¶ø</div>
                        <div class="quick-item" onclick="addQuickItem('ü•ö ‡¶°‡¶ø‡¶Æ')">ü•ö ‡¶°‡¶ø‡¶Æ</div>
                    </div>
                </div>

                <div class="form-group">
                    <label>‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ (Excel Style)</label>
                    <div class="excel-table-container">
                        <table class="excel-table">
                            <thead>
                                <tr>
                                    <th style="width: 20%;">‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ</th>
                                    <th style="width: 10%;">‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£</th>
                                    <th style="width: 10%;">‡¶è‡¶ï‡¶ï</th>
                                    <th style="width: 12%;">‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶è‡¶ï‡¶ï ‡¶¶‡¶æ‡¶Æ</th>
                                    <th style="width: 12%;">‡¶Æ‡ßã‡¶ü ‡¶¶‡¶æ‡¶Æ</th>
                                    <th style="width: 12%;">‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø</th>
                                    <th style="width: 12%;">‡¶Æ‡ßá‡¶Æ‡ßã ‡¶õ‡¶¨‡¶ø</th>
                                    <th style="width: 6%;">‡¶Æ‡ßÅ‡¶õ‡ßÅ‡¶®</th>
                                </tr>
                            </thead>
                            <tbody id="items-tbody">
                                <tr>
                                    <td>
                                        <input type="text" class="item-name" placeholder="‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ ‡¶≤‡¶ø‡¶ñ‡ßÅ‡¶®..." oninput="calculateRow(this)">
                                    </td>
                                    <td>
                                        <input type="number" class="item-quantity" value="0" step="0.1" min="0" oninput="calculateRow(this)">
                                    </td>
                                    <td>
                                        <select class="item-unit" onchange="calculateRow(this)">
                                            <option>‡¶ï‡ßá‡¶ú‡¶ø</option>
                                            <option>‡¶™‡¶ø‡¶∏</option>
                                            <option>‡¶≤‡¶ø‡¶ü‡¶æ‡¶∞</option>
                                            <option>‡¶ó‡ßç‡¶∞‡¶æ‡¶Æ</option>
                                            <option>‡¶π‡¶æ‡¶≤‡¶ø</option>
                                        </select>
                                    </td>
                                    <td>
                                        <input type="number" class="item-price" value="0" step="0.01" min="0" oninput="calculateRow(this)">
                                    </td>
                                    <td class="calc-cell item-total">‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ</td>
                                    <td>
                                        <select class="item-category">
                                            <option>‡¶Æ‡ßÅ‡¶¶‡¶ø</option>
                                            <option>‡¶∏‡¶¨‡¶ú‡¶ø</option>
                                            <option>‡¶Æ‡¶æ‡¶õ-‡¶Æ‡¶æ‡¶Ç‡¶∏</option>
                                            <option>‡¶´‡¶≤‡¶Æ‡ßÇ‡¶≤</option>
                                            <option>‡¶Ö‡¶®‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶Ø</option>
                                        </select>
                                    </td>
                                    <td class="memo-cell">
                                        <input type="file" class="item-memo-file" accept="image/*" hidden onchange="previewMemoImage(this)">
                                        <button type="button" class="memo-upload-btn" onclick="this.previousElementSibling.click()" title="‡¶è‡¶á ‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ‡ßá‡¶∞ ‡¶Æ‡ßá‡¶Æ‡ßã ‡¶õ‡¶¨‡¶ø">üì∑</button>
                                        <span class="memo-has-pic" style="display:none;">‚úì</span>
                                        <img class="memo-preview" alt="" style="display:none; max-width:32px; max-height:32px; border-radius:4px; vertical-align:middle;">
                                    </td>
                                    <td style="text-align: center;">
                                        <button class="delete-btn" onclick="deleteRow(this)">‚úï</button>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <button class="add-row-btn" onclick="addNewRow()">+ ‡¶®‡¶§‡ßÅ‡¶® ‡¶∏‡¶æ‡¶∞‡¶ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                </div>

                <div class="form-group">
                    <label>‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø (Optional)</label>
                    <textarea id="entry-comment" rows="2" placeholder="‡¶Ø‡ßá‡¶Æ‡¶®: ‡¶Ü‡¶ú ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶≠‡¶æ‡¶≤‡ßã ‡¶õ‡¶ø‡¶≤, ‡¶¶‡¶æ‡¶Æ ‡¶è‡¶ï‡¶ü‡ßÅ ‡¶¨‡ßá‡¶∂‡¶ø ‡¶õ‡¶ø‡¶≤"></textarea>
                </div>

                <div class="summary-box">
                    <div class="summary-row">
                        <span>‡¶Æ‡ßã‡¶ü ‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ:</span>
                        <span id="total-items" style="font-weight: 600;">‡ß¶‡¶ü‡¶ø</span>
                    </div>
                    <div class="summary-row">
                        <span>‡¶∏‡¶∞‡ßç‡¶¨‡¶Æ‡ßã‡¶ü ‡¶ñ‡¶∞‡¶ö:</span>
                        <span id="total-cost" class="summary-total">‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ</span>
                    </div>
                </div>

                <button class="btn btn-success" id="save-entry-btn" style="width: 100%; margin-top: 20px; padding: 15px; font-size: 18px;" onclick="saveEntry()">
                    ‚úì ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®
                </button>
            </div>
            </div>

            <div id="worker-panel-list" class="worker-tab-panel">
            <div class="card">
                <div class="card-title">‡¶∏‡¶¨ ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø</div>
                <div class="worker-recent-table-wrap">
                    <table class="table table-entries">
                        <thead>
                            <tr>
                                <th>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</th>
                                <th>‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ</th>
                                <th>‡¶Æ‡ßã‡¶ü ‡¶ñ‡¶∞‡¶ö</th>
                                <th>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶®</th>
                                <th>‡¶°‡¶ø‡¶≤‡¶ø‡¶ü</th>
                            </tr>
                        </thead>
                        <tbody id="worker-entries-tbody">
                            <tr><td colspan="5" style="text-align:center;color:#6b7280;padding:10px;">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
            </div>

            <div id="worker-panel-import" class="worker-tab-panel">
            <div class="card">
                <div class="card-title">‡¶™‡ßÅ‡¶∞‡¶®‡ßã ‡¶¨‡¶ø‡¶≤ CSV ‡¶á‡¶Æ‡¶™‡ßã‡¶∞‡ßç‡¶ü</div>
                <p style="margin-bottom:12px; font-size: 13px; color: var(--text-muted, #6b7280);">‡¶∂‡¶§ ‡¶∂‡¶§ ‡¶™‡ßÅ‡¶∞‡¶®‡ßã ‡¶¨‡¶ø‡¶≤ ‡¶è‡¶ï‡¶∏‡¶æ‡¶•‡ßá ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶§‡ßá CSV ‡¶™‡ßá‡¶∏‡ßç‡¶ü ‡¶¨‡¶æ ‡¶´‡¶æ‡¶á‡¶≤ ‡¶Ü‡¶™‡¶≤‡ßã‡¶° ‡¶ï‡¶∞‡ßÅ‡¶®‡•§ ‡¶è‡¶ï‡¶á ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ‡ßá‡¶∞ ‡¶∏‡¶¨ ‡¶∏‡¶æ‡¶∞‡¶ø ‡¶è‡¶ï‡¶á ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø‡¶§‡ßá ‡¶Ø‡¶æ‡¶¨‡ßá‡•§ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ ‡¶á‡¶Ç‡¶∞‡ßá‡¶ú‡¶ø ‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ü‡ßá ‡¶¶‡¶ø‡¶® (YYYY-MM-DD), ‡¶Ø‡ßá‡¶Æ‡¶® 2024-01-15‡•§</p>
                <div class="form-group">
                    <label>CSV ‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ü (‡¶™‡ßç‡¶∞‡¶•‡¶Æ ‡¶≤‡¶æ‡¶á‡¶® ‡¶π‡ßá‡¶°‡¶æ‡¶∞ ‡¶•‡¶æ‡¶ï‡¶≤‡ßá ‡¶∏‡ßá‡¶ü‡¶æ ‡¶¨‡¶æ‡¶¶ ‡¶¶‡ßá‡¶ì‡¶Ø‡¶º‡¶æ ‡¶π‡¶¨‡ßá)</label>
                    <p style="font-size:12px; margin-bottom:6px;"><strong>‡¶∏‡ßç‡¶ü‡ßç‡¶Ø‡¶æ‡¶®‡ßç‡¶°‡¶æ‡¶∞‡ßç‡¶°:</strong> entry_date,item_name,quantity,unit,price_per_unit,total_price ‚Äî ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ ‡¶á‡¶Ç‡¶∞‡ßá‡¶ú‡¶ø ‡¶¨‡¶æ ‡¶π‡¶ø‡¶ú‡¶∞‡¶ø; ‡¶¶‡¶æ‡¶Æ ‡¶Ø‡ßá‡¶ï‡ßã‡¶® ‡¶è‡¶ï‡¶ü‡¶ø‡•§ <strong>‡¶¨‡¶ø‡¶≤ ‡¶´‡¶∞‡¶Æ‡ßç‡¶Ø‡¶æ‡¶ü:</strong> ‡¶ï‡ßç‡¶∞‡¶Æ‡¶ø‡¶ï,‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ,‡¶∏‡¶æ‡¶Æ‡¶æ‡¶®,‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£,‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø (‡ß¶‡ßÆ/‡ß¶‡ßÆ/‡ß™‡ß≠ ‡¶ì ‡¶¨‡¶æ‡¶Ç‡¶≤‡¶æ ‡¶Ö‡¶ô‡ßç‡¶ï) ‡¶™‡ßá‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡¶≤‡ßá‡¶ì ‡¶ö‡¶≤‡ßá‡•§</p>
                    <p style="font-size:12px; margin-bottom:8px;">‡¶â‡¶¶‡¶æ‡¶π‡¶∞‡¶£: 2024-01-15,‡¶ö‡¶æ‡¶≤,5,‡¶ï‡ßá‡¶ú‡¶ø,70, &nbsp;|&nbsp; 08-08-1447,‡¶ü‡¶Æ‡ßá‡¶ü‡ßã,3,‡¶ï‡ßá‡¶ú‡¶ø,,240</p>
                    <textarea id="csv-import-text" rows="8" placeholder="‡¶è‡¶ñ‡¶æ‡¶®‡ßá CSV ‡¶™‡ßá‡¶∏‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶® ‡¶Ö‡¶•‡¶¨‡¶æ ‡¶®‡¶ø‡¶ö‡ßá ‡¶´‡¶æ‡¶á‡¶≤ ‡¶ö‡¶Ø‡¶º‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®..." style="width:100%; padding:10px; border-radius:6px; border:1px solid var(--border); font-family: inherit;"></textarea>
                    <input type="file" id="csv-import-file" accept=".csv,.txt" style="margin-top:8px;" onchange="readCsvFile(this)">
                </div>
                <button type="button" class="btn btn-success" onclick="doCsvImport()">‡¶á‡¶Æ‡¶™‡ßã‡¶∞‡ßç‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                <p id="csv-import-result" style="margin-top:10px; font-size:13px;"></p>
            </div>
            </div>

            <div id="worker-panel-log" class="worker-tab-panel">
            <div class="card">
                <div class="card-title">‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®‡ßá‡¶∞ ‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏ (‡¶è‡¶°‡¶ø‡¶ü ‡¶≤‡¶ó)</div>
                <p style="margin-bottom:10px; font-size: 13px; color: var(--text-muted, #6b7280);">‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ü‡¶ø ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶è‡¶°‡¶ø‡¶ü‡ßá‡¶∞ ‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶° ‡¶®‡¶ø‡¶ö‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§</p>
                <div class="worker-recent-table-wrap">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</th>
                                <th>‡¶è‡¶°‡¶ø‡¶ü‡ßá‡¶∞ ‡¶∏‡¶Æ‡¶Ø‡¶º</th>
                                <th>‡¶Ü‡¶ó‡ßá‡¶∞ ‡¶Æ‡ßã‡¶ü</th>
                                <th>‡¶®‡¶§‡ßÅ‡¶® ‡¶Æ‡ßã‡¶ü</th>
                            </tr>
                        </thead>
                        <tbody id="worker-log-tbody">
                            <tr><td colspan="4" style="text-align:center;color:#6b7280;padding:12px;">‡¶ï‡ßã‡¶®‡ßã ‡¶è‡¶°‡¶ø‡¶ü ‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶° ‡¶®‡ßá‡¶á</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
            </div>
        </div>

        <!-- ‡¶Ö‡ßç‡¶Ø‡¶æ‡¶°‡¶Æ‡¶ø‡¶® ‡¶≠‡¶ø‡¶â -->
        <div id="admin-view" class="view">
            <!-- Dashboard (always visible, like worker) -->
            <div class="balance-card admin-balance-card">
                <div class="balance-card-header">
                    <span class="balance-card-title" id="balance-label">‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ‡¶∞ ‡¶π‡¶æ‡¶§‡ßá ‡¶ü‡¶æ‡¶ï‡¶æ</span>
                    <span class="balance-card-update">‡¶∂‡ßá‡¶∑ ‡¶Ü‡¶™‡¶°‡ßá‡¶ü</span>
                </div>
                <div class="balance-amount" id="balance-amount">‡ß≥ ‡ß¶</div>
                <div class="action-buttons">
                    <button class="btn btn-secondary balance-btn" type="button" onclick="openBalanceStatement()">‡¶π‡¶ø‡¶∏‡¶æ‡¶¨ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®</button>
                </div>
            </div>
            <div id="admin-stats-grid" class="stats-grid">
                <div class="stat-card">
                    <div class="stat-value">‚Äî</div>
                    <div class="stat-label">‡¶Æ‡ßã‡¶ü ‡¶ñ‡¶∞‡¶ö (‡¶´‡¶ø‡¶≤‡ßç‡¶ü‡¶æ‡¶∞ ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡¶Ø‡¶º‡ßÄ)</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">‚Äî</div>
                    <div class="stat-label">‡¶Æ‡ßã‡¶ü ‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">‚Äî</div>
                    <div class="stat-label">‡¶ó‡¶°‡¶º ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value" id="stat-hand-balance">‚Äî</div>
                    <div class="stat-label" id="stat-hand-label">‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞‡¶ï‡¶æ‡¶∞‡ßÄ‡¶∞ ‡¶π‡¶æ‡¶§‡ßá ‡¶ü‡¶æ‡¶ï‡¶æ</div>
                </div>
            </div>

            <!-- Admin tabs under dashboard: ‡¶∏‡¶¨ ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø | ‡¶≤‡¶ó -->
            <div class="admin-tabs worker-tabs">
                <button type="button" class="admin-tab-btn worker-tab-btn active" data-admin-tab="entries" onclick="switchAdminTab('entries')">‡¶∏‡¶¨ ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø</button>
                <button type="button" class="admin-tab-btn worker-tab-btn" data-admin-tab="log" onclick="switchAdminTab('log')">‡¶≤‡¶ó</button>
            </div>

            <div id="admin-panel-entries" class="admin-tab-panel worker-tab-panel active">
                <!-- Filters -->
                <div class="card">
                    <div class="card-title">‡¶´‡¶ø‡¶≤‡ßç‡¶ü‡¶æ‡¶∞ ‡¶ì ‡¶∏‡¶æ‡¶∞‡ßç‡¶ö</div>
                    <div class="filter-bar">
                        <select id="admin-filter-date" onchange="applyAdminDateFilterVisibility(); loadAdminData();">
                            <option value="all_time" selected>‡¶∏‡¶¨ ‡¶∏‡¶Æ‡¶Ø‡¶º (‡¶∏‡¶¨ ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø)</option>
                            <option value="this_month">‡¶è‡¶á ‡¶Æ‡¶æ‡¶∏</option>
                            <option value="last_month">‡¶ó‡¶§ ‡¶Æ‡¶æ‡¶∏</option>
                            <option value="this_week">‡¶è‡¶á ‡¶∏‡¶™‡ßç‡¶§‡¶æ‡¶π</option>
                            <option value="today">‡¶Ü‡¶ú</option>
                            <option value="custom">‡¶ï‡¶æ‡¶∏‡ßç‡¶ü‡¶Æ ‡¶∞‡ßá‡¶û‡ßç‡¶ú</option>
                        </select>
                        <span id="admin-custom-dates-wrap" style="display:none;">
                            <input type="date" id="admin-date-from" title="‡¶∂‡ßÅ‡¶∞‡ßÅ‡¶∞ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ">
                            <input type="date" id="admin-date-to" title="‡¶∂‡ßá‡¶∑ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ">
                        </span>
                        <select id="admin-filter-item" onchange="onAdminItemFilterChange()" onfocus="onAdminItemFilterFocus()" title="‡¶™‡ßÅ‡¶∞‡¶®‡ßã ‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá ‡¶´‡¶ø‡¶≤‡ßç‡¶ü‡¶æ‡¶∞">
                            <option value="">‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ ‡¶¶‡¶ø‡¶Ø‡¶º‡ßá ‡¶´‡¶ø‡¶≤‡ßç‡¶ü‡¶æ‡¶∞</option>
                        </select>
                        <div class="admin-search-wrap" style="position:relative;">
                            <input type="text" id="admin-filter-search" placeholder="‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ ‡¶¨‡¶æ ‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø ‡¶∏‡¶æ‡¶∞‡ßç‡¶ö..." autocomplete="off"
                                onkeypress="if(event.key==='Enter') loadAdminData();" oninput="onAdminSearchInput(); updateAdminSearchClearVisibility();" onfocus="onAdminSearchFocus()">
                            <button type="button" class="admin-search-clear" id="admin-search-clear" onclick="clearAdminSearch()" title="‡¶∏‡¶æ‡¶∞‡ßç‡¶ö ‡¶ï‡ßç‡¶≤‡¶ø‡¶Ø‡¶º‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®" aria-label="Clear search">√ó</button>
                            <div id="admin-search-suggestions" class="admin-search-suggestions" style="display:none;"></div>
                        </div>
                        <button type="button" class="btn btn-primary" onclick="loadAdminData()">üîç ‡¶™‡ßç‡¶∞‡¶Ø‡¶º‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                    </div>
                </div>
                <!-- Entries list (filtered by date/category/search) -->
                <div class="card">
                    <div class="card-title">‡¶¨‡¶æ‡¶ú‡¶æ‡¶∞ ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø</div>
                    <table class="table table-entries">
                        <thead>
                            <tr>
                                <th>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</th>
                                <th>‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ ‡¶∏‡¶Ç‡¶ñ‡ßç‡¶Ø‡¶æ</th>
                                <th>‡¶Æ‡ßã‡¶ü ‡¶ñ‡¶∞‡¶ö</th>
                                <th>‡¶Ö‡ßç‡¶Ø‡¶æ‡¶ï‡¶∂‡¶®</th>
                            </tr>
                        </thead>
                        <tbody id="entries-tbody">
                            <tr><td colspan="4" style="text-align: center; padding: 20px; color: #6b7280;">‡¶≤‡ßã‡¶° ‡¶π‡¶ö‡ßç‡¶õ‡ßá...</td></tr>
                        </tbody>
                    </table>
                </div>
                <!-- Item Summary -->
                <div class="card">
                    <div class="card-title">‡¶∏‡¶¨‡¶ö‡ßá‡¶Ø‡¶º‡ßá ‡¶¨‡ßá‡¶∂‡¶ø ‡¶ï‡ßá‡¶®‡¶æ (‡¶´‡¶ø‡¶≤‡ßç‡¶ü‡¶æ‡¶∞ ‡¶Ö‡¶®‡ßÅ‡¶Ø‡¶æ‡¶Ø‡¶º‡ßÄ)</div>
                    <table class="table">
                        <thead>
                            <tr>
                                <th>‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ</th>
                                <th>‡¶Æ‡ßã‡¶ü ‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£</th>
                                <th>‡¶Æ‡ßã‡¶ü ‡¶ñ‡¶∞‡¶ö</th>
                                <th>‡¶ó‡¶°‡¶º ‡¶¶‡¶æ‡¶Æ</th>
                            </tr>
                        </thead>
                        <tbody id="top-items-tbody">
                            <tr><td colspan="4" style="text-align: center; padding: 20px; color: #6b7280;">‡¶ï‡ßã‡¶®‡ßã ‡¶°‡ßá‡¶ü‡¶æ ‡¶®‡ßá‡¶á</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div id="admin-panel-log" class="admin-tab-panel worker-tab-panel">
                <div class="card">
                    <div class="card-title">‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®‡ßá‡¶∞ ‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏ (‡¶è‡¶°‡¶ø‡¶ü ‡¶≤‡¶ó)</div>
                    <p style="margin-bottom:10px; font-size: 13px; color: var(--text-muted, #6b7280);">‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ü‡¶ø ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶è‡¶°‡¶ø‡¶ü‡ßá‡¶∞ ‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶° ‡¶®‡¶ø‡¶ö‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§</p>
                    <div class="worker-recent-table-wrap">
                        <table class="table">
                            <thead>
                                <tr>
                                    <th>‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</th>
                                    <th>‡¶è‡¶°‡¶ø‡¶ü‡ßá‡¶∞ ‡¶∏‡¶Æ‡¶Ø‡¶º</th>
                                    <th>‡¶Ü‡¶ó‡ßá‡¶∞ ‡¶Æ‡ßã‡¶ü</th>
                                    <th>‡¶®‡¶§‡ßÅ‡¶® ‡¶Æ‡ßã‡¶ü</th>
                                </tr>
                            </thead>
                            <tbody id="admin-log-tbody">
                                <tr><td colspan="4" style="text-align:center;color:#6b7280;padding:12px;">‡¶ï‡ßã‡¶®‡ßã ‡¶è‡¶°‡¶ø‡¶ü ‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶° ‡¶®‡ßá‡¶á</td></tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Entry details modal (per-item memo indicator) -->
    <div id="details-modal-overlay" class="details-modal-overlay" onclick="if(event.target===this) closeDetailsModal()">
        <div class="details-modal">
            <div class="details-modal-header">
                <span>‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶¨‡¶ø‡¶∏‡ßç‡¶§‡¶æ‡¶∞‡¶ø‡¶§</span>
                <button type="button" onclick="closeDetailsModal()" style="background:transparent;border:none;color:white;font-size:20px;cursor:pointer;">√ó</button>
            </div>
            <div class="details-modal-body" id="details-modal-body"></div>
        </div>
    </div>

    <!-- Memo image viewer popup -->
    <div id="memo-viewer-overlay" class="memo-viewer-overlay" onclick="if(event.target===this) closeMemoViewer()">
        <div class="memo-viewer-box">
            <button type="button" class="memo-viewer-close" onclick="closeMemoViewer()" aria-label="‡¶¨‡¶®‡ßç‡¶ß">√ó</button>
            <img id="memo-viewer-img" src="" alt="‡¶Æ‡ßá‡¶Æ‡ßã ‡¶õ‡¶¨‡¶ø">
        </div>
    </div>

    <!-- Balance statement modal (‡¶π‡¶ø‡¶∏‡¶æ‡¶¨ ‡¶¶‡ßá‡¶ñ‡ßÅ‡¶®) -->
    <div id="balance-statement-overlay" class="details-modal-overlay" onclick="if(event.target===this) closeBalanceStatement()">
        <div class="details-modal">
            <div class="details-modal-header">
                <span>‡¶π‡¶ø‡¶∏‡¶æ‡¶¨</span>
                <button type="button" onclick="closeBalanceStatement()" style="background:transparent;border:none;color:white;font-size:20px;cursor:pointer;" aria-label="‡¶¨‡¶®‡ßç‡¶ß">√ó</button>
            </div>
            <div class="details-modal-body" id="balance-statement-body"></div>
        </div>
    </div>

    <!-- Edit entry modal -->
    <div id="edit-entry-overlay" class="details-modal-overlay" onclick="if(event.target===this) closeEditEntryModal()">
        <div class="details-modal" style="max-width: 96%;">
            <div class="details-modal-header">
                <span>‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶è‡¶°‡¶ø‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®</span>
                <button type="button" onclick="closeEditEntryModal()" style="background:transparent;border:none;color:white;font-size:20px;cursor:pointer;">√ó</button>
            </div>
            <div class="details-modal-body">
                <input type="hidden" id="edit-entry-id" value="">
                <div class="form-group">
                    <label>‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</label>
                    <input type="date" id="edit-entry-date" value="">
                </div>
                <div class="form-group">
                    <label>‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ ‡¶§‡¶æ‡¶≤‡¶ø‡¶ï‡¶æ</label>
                    <div class="excel-table-container">
                        <table class="excel-table">
                            <thead>
                                <tr>
                                    <th>‡¶Ü‡¶á‡¶ü‡ßá‡¶Æ‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ</th>
                                    <th>‡¶™‡¶∞‡¶ø‡¶Æ‡¶æ‡¶£</th>
                                    <th>‡¶è‡¶ï‡¶ï</th>
                                    <th>‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡¶è‡¶ï‡¶ï ‡¶¶‡¶æ‡¶Æ</th>
                                    <th>‡¶Æ‡ßã‡¶ü ‡¶¶‡¶æ‡¶Æ</th>
                                    <th>‡¶ï‡ßç‡¶Ø‡¶æ‡¶ü‡¶æ‡¶ó‡¶∞‡¶ø</th>
                                    <th>‡¶Æ‡ßá‡¶Æ‡ßã</th>
                                    <th>‡¶Æ‡ßÅ‡¶õ‡ßÅ‡¶®</th>
                                </tr>
                            </thead>
                            <tbody id="edit-items-tbody"></tbody>
                        </table>
                    </div>
                    <button type="button" class="add-row-btn" onclick="addEditRow()">+ ‡¶∏‡¶æ‡¶∞‡¶ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                </div>
                <div class="form-group">
                    <label>‡¶Æ‡¶®‡ßç‡¶§‡¶¨‡ßç‡¶Ø</label>
                    <textarea id="edit-entry-comment" rows="2"></textarea>
                </div>
                <p style="margin-bottom:8px;"><strong>‡¶Æ‡ßã‡¶ü ‡¶ñ‡¶∞‡¶ö:</strong> <span id="edit-summary-total">‡ß¶ ‡¶ü‡¶æ‡¶ï‡¶æ</span></p>
                <div class="action-buttons" style="margin-top:12px;">
                    <button type="button" class="btn btn-success" onclick="saveEditedEntry()">‡¶∏‡ßá‡¶≠ ‡¶ï‡¶∞‡ßÅ‡¶®</button>
                    <button type="button" class="btn btn-secondary" onclick="closeEditEntryModal()">‡¶¨‡¶æ‡¶§‡¶ø‡¶≤</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Edit log modal (‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®‡ßá‡¶∞ ‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏) -->
    <div id="edit-log-overlay" class="details-modal-overlay" onclick="if(event.target===this) closeEditLogModal()">
        <div class="details-modal">
            <div class="details-modal-header">
                <span>‡¶™‡¶∞‡¶ø‡¶¨‡¶∞‡ßç‡¶§‡¶®‡ßá‡¶∞ ‡¶á‡¶§‡¶ø‡¶π‡¶æ‡¶∏ (‡¶è‡¶°‡¶ø‡¶ü ‡¶≤‡¶ó)</span>
                <button type="button" onclick="closeEditLogModal()" style="background:transparent;border:none;color:white;font-size:20px;cursor:pointer;">√ó</button>
            </div>
            <div class="details-modal-body">
                <p style="margin-bottom:10px; font-size: 13px; color: var(--text-muted, #6b7280);">‡¶™‡ßç‡¶∞‡¶§‡¶ø‡¶ü‡¶ø ‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶è‡¶°‡¶ø‡¶ü‡ßá‡¶∞ ‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶° ‡¶®‡¶ø‡¶ö‡ßá ‡¶¶‡ßá‡¶ñ‡¶æ‡¶®‡ßã ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá‡•§</p>
                <table class="table">
                    <thead>
                        <tr>
                            <th>‡¶è‡¶®‡ßç‡¶ü‡ßç‡¶∞‡¶ø ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ</th>
                            <th>‡¶è‡¶°‡¶ø‡¶ü‡ßá‡¶∞ ‡¶∏‡¶Æ‡¶Ø‡¶º</th>
                            <th>‡¶Ü‡¶ó‡ßá‡¶∞ ‡¶Æ‡ßã‡¶ü</th>
                            <th>‡¶®‡¶§‡ßÅ‡¶® ‡¶Æ‡ßã‡¶ü</th>
                        </tr>
                    </thead>
                    <tbody id="edit-log-tbody">
                        <tr><td colspan="4" style="text-align:center;color:#6b7280;padding:12px;">‡¶ï‡ßã‡¶®‡ßã ‡¶è‡¶°‡¶ø‡¶ü ‡¶∞‡ßá‡¶ï‡¶∞‡ßç‡¶° ‡¶®‡ßá‡¶á</td></tr>
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
